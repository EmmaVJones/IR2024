---
title: "7Q10 Analysis for Assessment Purposes"
author: "Emma Jones"
date: "10/18/2022"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(tidyverse)
library(sf)
```

## Purpose

This document walks users through the process of identifying all areas where flow data are available in a IR window (6yr) across VA stream gages. Then, 7Q10 statistics are applied to the flow data to identify any locations/times of year that fall below this low flow statistic. This is important such that assessors may know there are flow-related reasons to potentially exclude data from exceedance analysis to aquatic life criteria. This data is then summarized to the VAHU6 watershed level such that any site that falls within said watershed will receive a flag if relevant data are collected during a low flow period.

### Identify flow data during assessment window

```{r}


query <-  paste0('https://streamstats.usgs.gov/streamstatsservices/flowstatistics.json?rcode=VA') 
  # data pulled
  mydata <-  tryCatch({
    fromJSON(query, simplifyVector = FALSE, simplifyDataFrame = FALSE)},
    error = function(cond){
      message(paste('StreamStats Error:', cond))
      return(NULL)},
    warning = function(cond){
      message(paste('StreamStats Error:', cond))
      return(NULL)})
  
```

